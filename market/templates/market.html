{% extends 'base.html' %}

{% block title %}
Market
{% endblock %}

{% block content %}

<style>
  .market-title {
    font-weight: 700;
  }

  .item-card {
    border-radius: 16px;
    background: #ffffff;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
    transition: all 0.3s ease;
    overflow: hidden;
  }

  .item-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 45px rgba(0, 0, 0, 0.12);
  }

  .item-price {
    color: #ff6a00;
    font-weight: 700;
    font-size: 1.2rem;
  }

  .item-actions .btn {
    border-radius: 30px;
    padding: 6px 14px;
    font-size: 0.85rem;
    transition: all 0.3s ease;
  }

  .item-actions .btn:hover {
    transform: translateY(-2px);
  }

  .owned-card {
    border-radius: 16px;
    background: linear-gradient(135deg, #fff5ee, #ffffff);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
  }

  .owned-card:hover {
    transform: translateY(-6px);
  }
</style>

<div class="container">

  <div class="row">
    <!-- AVAILABLE ITEMS -->
    <div class="col-lg-8">
      <h2 class="market-title mb-1">Available Items</h2>
      <p class="text-muted mb-4">Browse products and purchase instantly</p>

      <div class="row">
        {% for item in items %}
        {% include 'includes/items_modals.html' %}

        <div class="col-md-6 col-lg-4 mb-4">
          <div class="item-card p-3 h-100">

            <h5 class="font-weight-bold">{{ item.name }}</h5>
            <p class="text-muted mb-1">Barcode: {{ item.barcode }}</p>

            <p class="item-price mb-3">
              {{ item.price }}$
            </p>

            <div class="item-actions d-flex justify-content-between">
              <button class="btn btn-outline-info" data-toggle="modal" data-target="#Modal-MoreInfo-{{ item.id }}">
                Info
              </button>

              <button class="btn btn-outline-success" data-toggle="modal"
                data-target="#Modal-PurchaseConfirm-{{ item.id }}">
                Buy
              </button>
            </div>

          </div>
        </div>

        {% endfor %}
      </div>
    </div>

    <!-- OWNED ITEMS -->
    <div class="col-lg-4 mt-5 mt-lg-0">
      <h2 class="market-title mb-1">Your Items</h2>
      <p class="text-muted mb-4">Sell items back to the market</p>

      <div class="row">
        {% for owned_item in owned_items %}
        {% include 'includes/owned_items_modals.html' %}

        <div class="col-12 mb-3">
          <div class="owned-card p-3 text-center">

            <h5 class="font-weight-bold mb-1">
              {{ owned_item.name }}
            </h5>

            <p class="text-muted mb-2">
              Value: {{ owned_item.price }}$
            </p>

            <button class="btn btn-outline-danger btn-sm" data-toggle="modal"
              data-target="#Modal-SellingConfirm-{{ owned_item.id }}">
              Sell Item
            </button>

          </div>
        </div>

        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% endblock %}